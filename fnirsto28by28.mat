[rows cols] = size(FNIR1001); %// rows=4, cols=300
c=[];
for j = 1:rows
    a = FNIR1001(j,:);
   
a = a - min(a(:))
a = a ./ max(a(:))
a=a*255

mat(1,1) = 0;
mat(1,2) = 0;
mat(1,3) = 0;
mat(1,4)=(a(32)+a(43))/2;
mat(1,5)=a(43);
mat(1,6)=(a(43)+a(33)+a(44))/3;
mat(1,7)=a(44);
mat(1,8)=(a(44)+a(34)+a(45))/3;
mat(1,9)=a(45);
mat(1,10)=(a(45)+a(35)+a(46))/3;
mat(1,11)=a(46);
mat(1,12)=(a(46)+a(36)+a(47))/3;
mat(1,13)=a(47);
mat(1,14)=(a(47)+a(37)+a(48))/3;
mat(1,15)=a(48);
mat(1,16)=(a(48)+a(38)+a(49))/3;
mat(1,17)=a(49);
mat(1,18)=(a(49)+a(39)+a(50))/3;
mat(1,19)=a(50);
mat(1,20)=(a(50)+a(40)+a(51))/3;
mat(1,21)=a(51);
mat(1,22)=(a(31)+a(41)+a(52))/3;
mat(1,23)=a(52);
mat(1,24)=(a(52)+a(42))/2;
mat(1,25)=0;
mat(1,26)=0;
mat(1,27)=0;
mat(1,28)=0;
mat(2,1)=0;
mat(2,2)=0;
mat(2,3)=0;
mat(2,4)=a(32);
mat(2,5)=(a(32)+a(22)+a(43)+a(33))/4;
mat(2,6)=a(33);
mat(2,7)=(a(33)+a(23)+a(44)+a(34))/4;
mat(2,8)=a(34);
mat(2,9)=(a(34)+a(24)+a(45)+a(35))/4;
mat(2,10)=a(35);
mat(2,11)=(a(35)+a(25)+a(46)+a(36))/4;
mat(2,12)=a(36);
mat(2,13)=(a(36)+a(26)+a(47)+a(37))/4;
mat(2,14)=a(37);
mat(2,15)=(a(37)+a(27)+a(48)+a(38))/4;
mat(2,16)=a(38);
mat(2,17)=(a(38)+a(28)+a(49)+a(39))/4;
mat(2,18)=a(39);
mat(2,19)=(a(39)+a(29)+a(50)+a(40))/4;
mat(2,20)=a(40);
mat(2,21)=(a(40)+a(30)+a(51)+a(41))/4;
mat(2,22)=a(41);
mat(2,23)=(a(41)+a(31)+a(52)+a(42))/4;
mat(2,24)=a(42);
mat(2,25)=0;
mat(2,26)=0;
mat(2,27)=0;
mat(2,28)=0;
mat(3,1)=0;
mat(3,2)=0;
mat(3,3)=0;
mat(3,4)=(a(11)+a(22)+a(32))/3;
mat(3,5)=a(22);
mat(3,6)=(a(22)+a(12)+a(33)+a(23))/4;
mat(3,7)=a(23);
mat(3,8)=(a(23)+a(13)+a(34)+a(24))/4;
mat(3,9)=a(24);
mat(3,10)=(a(24)+a(14)+a(35)+a(25))/4;
mat(3,11)=a(25);
mat(3,12)=(a(25)+a(15)+a(36)+a(26))/4;
mat(3,13)=a(26);
mat(3,14)=(a(26)+a(16)+a(37)+a(27))/4;
mat(3,15)=a(27);
mat(3,16)=(a(27)+a(17)+a(38)+a(28))/4;
mat(3,17)=a(28);
mat(3,18)=(a(28)+a(18)+a(39)+a(29))/4;
mat(3,19)=a(29);
mat(3,20)=(a(29)+a(19)+a(40)+a(30))/4;
mat(3,21)=a(30);
mat(3,22)=(a(30)+a(20)+a(41)+a(31))/4;
mat(3,23)=a(31);
mat(3,24)=(a(31)+a(21)+a(42))/3;
mat(3,25)=0;
mat(3,26)=0;
mat(3,27)=0;
mat(3,28)=0;
mat(4,1)=0;
mat(4,2)=0;
mat(4,3)=0;
mat(4,4)=a(11);
mat(4,5)=(a(11)+a(1)+a(22)+a(12))/4;
mat(4,6)=a(12);
mat(4,7)=(a(12)+a(2)+a(23)+a(13))/4;
mat(4,8)=a(13);
mat(4,9)=(a(13)+a(3)+a(24)+a(14))/4;
mat(4,10)=a(14);
mat(4,11)=(a(14)+a(4)+a(25)+a(15))/4;
mat(4,12)=a(15);
mat(4,13)=(a(15)+a(5)+a(26)+a(16))/4;
mat(4,14)=a(16);
mat(4,15)=(a(16)+a(6)+a(27)+a(17))/4;
mat(4,16)=a(17);
mat(4,17)=(a(17)+a(7)+a(28)+a(18))/4;
mat(4,18)=a(18);
mat(4,19)=(a(18)+a(8)+a(29)+a(19))/4;
mat(4,20)=a(19);
mat(4,21)=(a(19)+a(9)+a(30)+a(20))/4;
mat(4,22)=a(20);
mat(4,23)=(a(20)+a(10)+a(31)+a(21))/4;
mat(4,24)=a(21);
mat(4,25)=0;
mat(4,26)=0;
mat(4,27)=0;
mat(4,28)=0;
mat(5,1)=0;
mat(5,2)=0;
mat(5,3)=0;
mat(5,4)=(a(11)+a(1))/2;
mat(5,5)=a(1);
mat(5,6)=(a(1)+a(12)+a(2))/3;
mat(5,7)=a(2);
mat(5,8)=(a(2)+a(13)+a(3))/3;
mat(5,9)=a(3);
mat(5,10)=(a(3)+a(14)+a(4))/3;
mat(5,11)=a(4);
mat(5,12)=(a(4)+a(15)+a(5))/3;
mat(5,13)=a(5);
mat(5,14)=(a(5)+a(16)+a(6))/3;
mat(5,15)=a(6);
mat(5,16)=(a(6)+a(17)+a(7))/3;
mat(5,17)=a(7);
mat(5,18)=(a(7)+a(18)+a(8))/3;
mat(5,19)=a(8);
mat(5,20)=(a(8)+a(19)+a(9))/3;
mat(5,21)=a(9);
mat(5,22)=(a(9)+a(20)+a(10))/3;
mat(5,23)=a(10);
mat(5,24)=(a(10)+a(21))/2;
mat(5,25)=0;
mat(5,26)=0;
mat(5,27)=0;
mat(5,28)=0;

finalMat1=[];
finalMat=[];
newA=[];
newB=[];
final=[];
matfin=[];
finalMat1 = kron(mat,ones(5,1));
finalMat = transpose(finalMat1);
final =reshape(finalMat,[],1)
newA = [zeros(28,1); final]
newB = [ newA;zeros(56,1)]
matfin = transpose(reshape(newB,[28,28]))
newB=transpose(newB);
 c=[c;newB];% add one row;
end
csvwrite('1001.csv',c);